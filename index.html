<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>The Architect Game Show</title>
    <style>
        body { background-color: #0a0a0a; color: #00ff00; font-family: 'Arial', sans-serif; text-align: center; }
        .container { display: flex; justify-content: space-around; margin-top: 20px; }
        .score-box { border: 3px solid #ff0000; padding: 20px; font-size: 40px; border-radius: 15px; background: #1a0000; }
        .timer { font-size: 80px; color: #ff0000; margin: 20px; text-shadow: 0 0 15px #ff0000; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 20px; }
        .slot { border: 2px solid #00ff00; height: 60px; display: flex; align-items: center; justify-content: center; font-size: 25px; background: #001a00; border-radius: 10px; }
        .revealed { background: #00ff00; color: #000; font-weight: bold; }
    </style>
</head>
<body>
    <div class="timer" id="countdown">20</div>
    <h1 id="question">جاري تحميل السؤال...</h1>
    
    <div class="container">
        <div class="score-box">فريق A: <span id="score1">0</span></div>
        <div class="score-box">فريق B: <span id="score2">0</span></div>
    </div>

    <div class="grid" id="answers-grid">
        </div>

    <script>
        let timeLeft = 20;
        let timerInterval;

        // دالة لتحديث البيانات من السيرفر كل ثانية
        async function updateDisplay() {
            const res = await fetch('/get_data');
            const data = await res.json();
            
            document.getElementById('question').innerText = data.question;
            document.getElementById('score1').innerText = data.scores.team1;
            document.getElementById('score2').innerText = data.scores.team2;
            
            let gridHtml = '';
            data.answers.forEach((ans, i) => {
                gridHtml += `<div class="slot ${ans.revealed ? 'revealed' : ''}">
                    ${ans.revealed ? ans.text + " (" + ans.points + ")" : (i + 1)}
                </div>`;
            });
            document.getElementById('answers-grid').innerHTML = gridHtml;
        }

        // دالة العداد
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 20;
            timerInterval = setInterval(() => {
                if(timeLeft <= 0) {
                    document.getElementById('countdown').innerText = "انتهى الوقت!";
                    clearInterval(timerInterval);
                } else {
                    document.getElementById('countdown').innerText = timeLeft;
                    timeLeft--;
                }
            }, 1000);
        }

        setInterval(updateDisplay, 1000); // تحديث الشاشة تلقائياً كل ثانية
    </script>
</body>
</html>
